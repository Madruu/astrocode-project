<main class="login-container">
  <mat-card class="login-card">

    <mat-card-title class="login-title">
      Acesse sua conta
    </mat-card-title>

    <form 
      [formGroup]="loginForm" 
      (ngSubmit)="onSubmit()" 
      class="login-form">

      <mat-form-field 
        appearance="outline" 
        class="custom-input">

        <mat-label>Email</mat-label>

        <input 
          matInput 
          type="email" 
          formControlName="email" />

        @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
          <mat-error class="error-message">Email é obrigatório</mat-error>
        }

        @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched && loginForm.get('email')?.hasError('email')) {
          <mat-error class="error-message">Email inválido</mat-error>
        }

      </mat-form-field>

      <mat-form-field 
        appearance="outline" 
        class="custom-input">

        <mat-label>Senha</mat-label>

        <input 
          matInput 
          type="password" 
          formControlName="password" />

        @if (loginForm.get('password')?.hasError('required')) {
          <mat-error class="error-message">Senha é obrigatória</mat-error>
        }

      </mat-form-field>

      <button 
        mat-raised-button 
        color="primary" 
        type="button"
        class="login-button"
        (click)="onSubmit()"
        [disabled]="loading()">
        {{ loading() ? 'Entrando...' : 'Entrar' }}
      </button>

      @if (errorMessage()) {
        <p class="error-message">{{ errorMessage() }}</p>
      }
    </form>
  </mat-card>
</main>
