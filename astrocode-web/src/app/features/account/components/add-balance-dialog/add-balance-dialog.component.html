<header class="dialog-header">
  <div class="title-wrap">
    <div class="header-icon">
      <mat-icon>account_balance_wallet</mat-icon>
    </div>
    <h2>Adicionar Saldo</h2>
  </div>
  <button class="close-btn" mat-icon-button mat-dialog-close aria-label="Fechar">
    <mat-icon>close</mat-icon>
  </button>
</header>

<mat-dialog-content>
  <form class="dialog-form" [formGroup]="form">
    <div class="section">
      <label>Valor a adicionar</label>
      <mat-form-field appearance="outline">
        <span matTextPrefix>R$&nbsp;</span>
        <input matInput type="number" formControlName="amount" placeholder="0,00" min="10" max="10000" />
      </mat-form-field>
      <small>Valor minimo: R$ 10,00 | Valor maximo: R$ 10.000,00</small>
    </div>

    <div class="section">
      <label>Selecione o metodo de pagamento</label>
      <div class="methods-grid">
        <button
          class="method-btn"
          type="button"
          [class.active]="isMethodSelected('credit')"
          (click)="setPaymentMethod('credit')">
          <mat-icon>credit_card</mat-icon>
          Credito
        </button>
        <button
          class="method-btn"
          type="button"
          [class.active]="isMethodSelected('debit')"
          (click)="setPaymentMethod('debit')">
          <mat-icon>payment</mat-icon>
          Debito
        </button>
        <button
          class="method-btn"
          type="button"
          [class.active]="isMethodSelected('pix')"
          (click)="setPaymentMethod('pix')">
          <mat-icon>qr_code_2</mat-icon>
          PIX
        </button>
      </div>
    </div>

    @if (requiresCardData) {
      <section class="card-data">
        <h3>Dados do cartao</h3>

        <mat-form-field appearance="outline">
          <mat-label>Numero do cartao</mat-label>
          <input matInput formControlName="cardNumber" placeholder="0000 0000 0000 0000" />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Nome no cartao</mat-label>
          <input matInput formControlName="cardHolder" placeholder="NOME COMPLETO" />
        </mat-form-field>

        <div class="two-cols">
          <mat-form-field appearance="outline">
            <mat-label>Validade</mat-label>
            <input matInput formControlName="cardExpiry" placeholder="MM/AA" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>CVV</mat-label>
            <input matInput formControlName="cardCvv" placeholder="000" />
          </mat-form-field>
        </div>
      </section>
    }
  </form>
</mat-dialog-content>

<mat-dialog-actions class="dialog-actions">
  <button class="cancel-btn" mat-stroked-button mat-dialog-close>Cancelar</button>
  <button class="confirm-btn" mat-flat-button type="button" (click)="submit()">
    <mat-icon>credit_card</mat-icon>
    Confirmar Pagamento
  </button>
</mat-dialog-actions>
